/*!
 * pushdown v0.0.1-snapshot 2014-01-08 (http://github.com/ivaynberg/pushdown)
 * Copyright 2013 Igor Vaynberg
 * Licensed under http://opensource.org/licenses/MIT
 */
!function(a,b){var c=function(b,c){this.container=b,this.opts=c,this.queue=[],this.busy=!1,this.opening=!1,this.closing=!1,b.data("pushdown",this),b.find(">.pushdown>.pushdown-content").addClass("pushdown-hidden"),b.on("click",a.proxy(this.click,this))};a.extend(c.prototype,{constructor:c,click:function(b){var c=a(b.target),d=c.parentsUntil(".pushdown").addBack();if(d.filter(".pushdown-close").size()>0)return this.queue.splice(0,this.queue.length,{type:1}),this.dequeue(),b.preventDefault(),void 0;if(d.filter(".pushdown-item").size()>0){var e=this.container.find(".pushdown-selected"),f=a(b.target).parents(".pushdown").first();if(this.closing)this.queue.splice(0,this.queue.length,{type:2,element:f});else if(e.size()>0)e.get(0)===f.get(0)?this.queue.splice(0,this.queue.length,{type:1}):this.queue.splice(0,this.queue.length,{type:1},{type:2,element:f});else{var g=a(b.target).parents(".pushdown").first();this.queue.splice(0,this.queue.length,{type:2,element:g})}this.dequeue()}},dequeue:function(){if(!this.busy&&0!==this.queue.length){var a=this.queue.splice(0,1)[0];1==a.type?this.close():2==a.type&&this.open(a.element)}},open:function(b){this.busy=!0,this.opening=!0;for(var c=b;c.next().size()>0&&c.next().position().left>c.position().left;)c=c.next();var d=a("<div class='pushdown-body' style='max-height:0'></div>");c.after(d);var e=b.find(">.pushdown-content"),f=e.height();d.append(e),e.removeClass("pushdown-hidden"),b.siblings().not(b).not(d).addClass("pushdown-unselected"),b.addClass("pushdown-selected"),d.animate({maxHeight:f},a.proxy(this.onOpened,this))},close:function(){this.busy=!0,this.closing=!0;var b=this.container.find(">.pushdown-selected");if(0!==b.size()){b=b.first();var c=this.container.find(">.pushdown-body").first();c.find(".pushdown-content"),c.animate({maxHeight:0},a.proxy(this.onClosed,this))}},onOpened:function(){this.busy=!1,this.opening=!1,this.dequeue();var c=this;a(b).on("resize.pushdown",function(){b.clearTimeout(c.resizeTimeout),c.resizeTimeout=b.setTimeout(function(){c.onResized()},50)})},onClosed:function(){a(b).off("resize.pushdown");var c=this.container.find(">.pushdown-selected").first(),d=this.container.find(">.pushdown-body").first(),e=d.find(".pushdown-content");e.addClass("pushdown-hidden"),c.append(e),d.remove(),c.siblings().addBack().removeClass("pushdown-selected pushdown-unselected"),this.busy=!1,this.closing=!1,this.dequeue()},onResized:function(){var a=this.container.find(">.pushdown-body").first();if(!(a.length<1)){a.detach();for(var b=this.container.find(">.pushdown-selected"),c=b;c.next().size()>0&&c.next().position().left>c.position().left;)c=c.next();c.after(a)}}}),a.fn.pushdown=function(){var b=Array.prototype.slice.call(arguments,0);this.each(function(){if(0===b.length||"object"==typeof b[0]){var d=0===b.length?{}:a.extend({},b[0]);new c(a(this),d)}else if("open"===b[0]){var e=a(this).data("pushdown"),f=b[1];"string"==typeof f?e.queue.push({type:2,element:e.container.find(">.pushdown").filter(f).first()}):"number"==typeof f?e.queue.push({type:2,element:a(e.container.find(">.pushdown").get(f))}):f instanceof jQuery&&e.queue.push({type:2,element:f}),e.dequeue()}return this})}}(jQuery,window,document);
//# sourceMappingURL=dist/pushdown.js.map